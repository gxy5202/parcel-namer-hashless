"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"default",{enumerable:!0,get:function(){return c}});var e,r=require("@swc/helpers/_/_async_to_generator"),n=require("@swc/helpers/_/_interop_require_default"),l=require("@swc/helpers/_/_ts_generator"),a=require("@parcel/plugin"),t=n._(require("@parcel/namer-default")),u=Symbol.for("parcel-plugin-config");function o(e,r){return Array.isArray(e)&&(null==e?void 0:e.some(function(e){return new RegExp(e).test(r)}))}function i(e){var r=e.allNames,n=e.oldName,l=e.newName,a=e.logger;return r.includes(l)?(a.warn({message:""+n+" hashless failed: file name exists"}),n):(a.log({message:n+" -> "+l}),r.push(l),l)}function s(e){var r=e.bundle,n=e.oldName,l=e.logger,a=e.include,t=e.exclude,u=e.allNames;try{if(!(null==r?void 0:r.needsStableName)){var s=n.split(".");s.splice(s.length-2,1);var c=s.join(".");if(o(t,c))return n;if(o(a,c))return i({allNames:u,oldName:n,newName:c,logger:l});if(Array.isArray(a))return n;return i({allNames:u,oldName:n,newName:c,logger:l})}}catch(e){console.error(e)}return n}!function(e){e.ALL="all",e.DEVELOPMENT="development",e.PRODUCTION="production"}(e||(e={}));var c=new a.Namer({loadConfig:function(e){var n=e.config;return r._(function(){var e,r,a;return l._(this,function(l){switch(l.label){case 0:return[4,n.getPackage()];case 1:if(r=null==(e=l.sent())?void 0:e["parcel-namer-hashless"],a=[],"[object Object]"===Object.prototype.toString.call(r))return[2,Promise.resolve({namerConfig:r,allNames:a})];return[2,Promise.resolve({})]}})})()},name:function(e){var n=e.bundle,a=e.bundleGraph,o=e.logger,i=e.options,c=e.config;return r._(function(){var e,r,d,m,f,g,p;return l._(this,function(l){switch(l.label){case 0:return[4,t.default[u].name({bundle:n,bundleGraph:a,logger:o})];case 1:if(e=l.sent(),r=c.namerConfig,d=c.allNames,m=r.mode,f=r.include,g=r.exclude,m===(p=i.mode)||"all"===m)return[2,s({bundle:n,oldName:e,logger:o,include:f,exclude:g,allNames:d})];if(!m){if("development"===p)return[2,e];return[2,s({bundle:n,oldName:e,logger:o,include:f,exclude:g,allNames:d})]}return[2,e]}})})()}});